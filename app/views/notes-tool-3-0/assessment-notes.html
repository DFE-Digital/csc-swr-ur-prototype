{% extends "layout.html" %}

{% block beforeContent %}
{% include './includes/phase-banner--alpha.html' %}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
		<h1 class="govuk-heading-xl">
			{{data['child'] or "Child A"}}
			<span class="govuk-caption-m">
				Case: 70037619
			</span>
		</h1>

		{% if data['events'].length %}
		<form method="post" action="create-event">
			<p>
				{{govukButton({
					text: "Add an event"
				})}}
			</p>
		</form>
		{% endif %}
		
		<!-- {{data['events'] | dump}} -->

		<h2 class="govuk-heading-l">
			Events recorded so far
		</h2>

		{% if data['events'].length %}
		<ol class="hmrc-timeline">
			{% for event in data['events'] %}
			<li class="hmrc-timeline-event">
				<h2 class="hmrc-timeline-event-title govuk-heading-m">
					{{event.type}}
				</h2>
				<span class="hmrc-timeline-event-meta govuk-body-s">
					{{event.datetime|formatDate('h:mma, D MMMM YYYY')}}
				</span>

				<div class="hmrc-timeline-event-content">
					<p>
						{{event.analysis}}
					</p>
					<p>
						<a href="event?id={{event.id}}">View event</a>
					</p>
				</div>
			</li>
			{% endfor %}
		</ol>

		{% else %}
		<p>
			You have not added any events yet.
		</p>
		<form method="post" action="create-written-note">
			<p>
				{{govukButton({
					text: "Add an event",
					classes: "govuk-!-margin-top-4",
					href: "event-type"
				})}}
			</p>
		</form>
		{% endif %}
	</div>

	<div class="govuk-grid-column-one-third">
	</div>
</div>
{% endblock %}
